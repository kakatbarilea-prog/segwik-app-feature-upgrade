<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Segwik Upgrade Flow</title>

<style>
  :root{
    --bg:#f6f8fb;
    --card:#ffffff;
    --ink:#1f2937;
    --muted:#7b8794;
    --line:#e7edf5;
    --accent:#2c7dbf;

    --tab:#8b96a8;
    --tabActive:#2c7dbf;

    --phone-w:430px;
    --phone-h:800px;
    --footer-h:74px;
    --head-h:56px;

    --radius:18px;
    --shadow:0 20px 60px rgba(0,0,0,.12),0 8px 16px rgba(0,0,0,.08);
    --shadow2:0 10px 26px rgba(15,45,86,.08);
    --shadow3:0 8px 20px rgba(15,45,86,.06);
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink)}
  .wrap{display:flex;align-items:center;justify-content:center;min-height:100%;padding:18px}

  /* phone shell */
  .phone{
    width:var(--phone-w);
    height:var(--phone-h);
    background:#fff;
    border-radius:34px;
    box-shadow:var(--shadow);
    border:8px solid #111;
    overflow:hidden;
    display:flex;
    flex-direction:column;
    position:relative;
  }

  /* screen stack */
  .screens{position:relative;flex:1;overflow:hidden;background:var(--bg)}
  .screen{
    position:absolute;inset:0;
    display:flex;flex-direction:column;
    transform:translateX(0);
    opacity:1;
    transition:transform .35s ease, opacity .35s ease;
    will-change:transform, opacity;
  }
  .screen.hidden{opacity:0;pointer-events:none}
  .screen.off-right{transform:translateX(100%);opacity:0;pointer-events:none}
  .screen.off-left{transform:translateX(-12%);opacity:0;pointer-events:none}

  /* topbar */
  .topbar{
    height:var(--head-h);
    display:flex;
    align-items:center;
    justify-content:center;
    border-bottom:1px solid var(--line);
    background:#fff;
    position:sticky;top:0;z-index:5;
  }
  .topbar .title{
    font-weight:700;
    color:var(--accent);
    font-size:18px;
    letter-spacing:.2px;
  }
  .topbar .backBtn{
    position:absolute;
    left:10px;
    width:36px;height:36px;
    border-radius:10px;
    border:1px solid var(--line);
    display:grid;place-items:center;
    cursor:pointer;
    background:#fff;
    color:#111;
  }
  .topbar .backBtn svg{width:18px;height:18px;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}

  /* content area */
  .content{
    flex:1;
    overflow:auto;
    background:var(--bg);
    padding:12px 12px calc(var(--footer-h) + 14px);

    scrollbar-width:none;
    -ms-overflow-style:none;
    -webkit-overflow-scrolling:touch;
    overscroll-behavior:contain;
  }
  .content::-webkit-scrollbar{width:0;height:0;display:none}

  /* bottom tabs */
  .tabs{
    height:var(--footer-h);
    border-top:1px solid var(--line);
    background:#fff;
    display:grid;
    grid-template-columns:repeat(5,1fr);
    padding:6px 6px 8px;
    position:absolute;
    bottom:0;left:0;right:0;
    z-index:6;
  }
  .tab{
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    gap:4px;
    color:var(--tab);
    font-size:11px;
    font-weight:600;
  }
  .tab svg{width:20px;height:20px;stroke:currentColor;fill:none;stroke-width:2}
  .tab.active{color:var(--tabActive);font-weight:700}

  /* cards */
  .card{
    background:var(--card);
    border:1px solid var(--line);
    border-radius:22px;
    box-shadow:var(--shadow3);
    padding:14px;
    margin:10px 0;
  }

  .heroCard{
    background:#fff;
    border:1px solid var(--line);
    border-radius:22px;
    box-shadow:var(--shadow2);
    padding:16px;
    margin:2px 0 12px;
  }

  .sectionTitle{
    font-weight:700;
    font-size:13px;
    color:#0b1b2b;
    margin:14px 0 8px;
    display:flex;
    align-items:center;
    gap:10px;
  }
  .sectionTitle .dot{width:9px;height:9px;border-radius:999px;background:var(--accent);opacity:.85}

  .mutedLine{
    color:#64748b;
    font-size:12px;
    line-height:1.35;
    font-weight:600;
  }

  /* locked header rows */
  .lockRow{
    display:flex;align-items:center;gap:12px;
  }
  .lockIcon{
    width:42px;height:42px;border-radius:14px;
    background:rgba(44,125,191,.10);
    border:1px solid rgba(44,125,191,.18);
    display:grid;place-items:center;
    color:var(--accent);
    flex:0 0 auto;
  }
  .lockIcon svg{width:20px;height:20px;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
  .lockMeta{min-width:0}
  .lockKicker{
    font-size:12px;color:#64748b;font-weight:700;
  }
  .lockNeed{
    margin-top:4px;
    font-size:15px;
    font-weight:700;
    color:#0b1b2b;
    line-height:1.2;
  }

  .miniGrid{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:10px;
    margin-top:12px;
  }
  .miniStat{
    border:1px solid rgba(44,125,191,.22);
    border-radius:16px;
    padding:10px 10px;
    background:rgba(44,125,191,.06);
    box-shadow:0 10px 22px rgba(15,45,86,.06);
  }

  .miniStat .k{font-size:11px;color:#8a94a6;font-weight:700}
  .miniStat .v{margin-top:4px;font-size:13px;color:#111;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

  /* choice buckets */
  .bucket{
    border:1px solid var(--line);
    border-radius:20px;
    background:#fff;
    box-shadow:var(--shadow3);
    padding:14px;
    margin:10px 0;
    cursor:pointer;
    position:relative;
  }
  .bucket:hover{border-color:rgba(44,125,191,.32)}
  .bucket.active{
    border-color:rgba(44,125,191,.55);
    box-shadow:0 14px 26px rgba(44,125,191,.16);
  }
  /* Pro bucket variant (visually distinct from Grow) */
  .bucket.pro{
    border:1px solid rgba(15,45,86,.14);
    background:linear-gradient(180deg, rgba(15,45,86,.035), #fff);
  }
  .bucket.pro:hover{
    border-color:rgba(15,45,86,.28);
  }

  /* When Pro is toggled ON, make the whole bucket feel "armed" */
  .bucket.pro.active{
    border-color:rgba(15,45,86,.40);
    box-shadow:0 14px 26px rgba(15,45,86,.14);
  }

  /* Pro header accents */
  .bucket.pro .bucketTitle{
    color:#0b1b2b;
  }
  .bucket.pro .bucketSub{
    color:#556274;
  }

  /* Make Pro toggle + status feel intentional */
  .bucket.pro .toggle.on{
    background:rgba(15,45,86,.22);
    border-color:rgba(15,45,86,.22);
  }

  .bucketTop{
    display:flex;align-items:flex-start;justify-content:space-between;gap:10px;
  }
  .bucketTitle{
    font-size:14px;
    font-weight:700;
    color:#0b1b2b;
    line-height:1.2;
  }
  .bucketSub{
    margin-top:6px;
    font-size:12px;
    color:#5b6776;
    font-weight:600;
    line-height:1.35;
  }

  .radio{
    width:22px;height:22px;border-radius:999px;
    border:2px solid #cbd5e1;
    display:grid;place-items:center;
    flex:0 0 auto;
    margin-top:2px;
  }
  .bucket.active .radio{border-color:rgba(44,125,191,.65)}
  .radio .dot{
    width:10px;height:10px;border-radius:999px;
    background:transparent;
  }
  .bucket.active .radio .dot{background:var(--accent)}

  .featureList{margin-top:12px;display:flex;flex-direction:column;gap:8px}
  .feat{
    display:flex;align-items:flex-start;gap:10px;
    font-size:13px;
    color:#0b1b2b;
    font-weight:600;
    line-height:1.25;
  }
  .check{
    width:18px;height:18px;border-radius:6px;
    border:1px solid rgba(44,125,191,.25);
    background:rgba(44,125,191,.08);
    color:var(--accent);
    display:grid;place-items:center;
    flex:0 0 auto;
    margin-top:1px;
  }
  .check svg{width:14px;height:14px;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}

  .addRow{
    margin-top:10px;
    padding-top:10px;
    border-top:1px dashed rgba(44,125,191,.22);
    display:flex;align-items:center;justify-content:space-between;gap:10px;
  }
  .addMeta{min-width:0}
  .addTitle{font-size:13px;font-weight:700;color:#0b1b2b}
  .addSub{margin-top:4px;font-size:12px;font-weight:600;color:#64748b;line-height:1.3}

  .toggle{
    width:46px;height:28px;border-radius:999px;
    border:1px solid #d1d5db;
    background:#e5e7eb;
    position:relative;
    cursor:pointer;
    flex:0 0 auto;
  }
  .toggle:after{
    content:"";
    position:absolute;top:50%;left:3px;transform:translateY(-50%);
    width:22px;height:22px;border-radius:999px;background:#fff;
    box-shadow:0 6px 12px rgba(0,0,0,.12);
    transition:left .18s ease;
  }
  .toggle.on{
    background:rgba(44,125,191,.32);
    border-color:rgba(44,125,191,.32);
  }
  .toggle.on:after{left:21px}

  /* Onboarding */
  .choiceCard{
    border:1px solid var(--line);
    border-radius:20px;
    background:#fff;
    box-shadow:var(--shadow3);
    padding:14px;
    margin:10px 0;
    cursor:pointer;
  }
  .choiceCard.active{
    border-color:rgba(44,125,191,.55);
    box-shadow:0 14px 26px rgba(44,125,191,.16);
  }
  .choiceTop{display:flex;align-items:flex-start;justify-content:space-between;gap:10px}
  .choiceTitle{font-weight:700;font-size:14px;color:#0b1b2b;line-height:1.2}
  .choiceSub{margin-top:6px;font-weight:600;font-size:12px;color:#5b6776;line-height:1.35}
  .badge{
    border:1px solid rgba(44,125,191,.22);
    background:rgba(44,125,191,.08);
    color:#0b1b2b;
    padding:7px 10px;
    border-radius:999px;
    font-size:11px;
    font-weight:700;
    white-space:nowrap;
    flex:0 0 auto;
  }

  /* Summary */
  .summaryGrid{
    display:grid;
    grid-template-columns:1fr auto;
    gap:10px 12px;
    align-items:start;
    font-size:13px;
    font-weight:600;
    margin-top:10px;
  }
  .summaryGrid .k{color:#64748b;font-weight:700}
  .summaryGrid .v{color:#0b1b2b;font-weight:700;text-align:right;white-space:nowrap}
  .divider{height:1px;background:var(--line);margin:12px 0}

  /* Buttons */
  .primaryBtn{
    width:100%;
    padding:14px 14px;
    border-radius:14px;
    border:0;
    background:var(--accent);
    color:#fff;
    font-weight:700;
    font-size:15px;
    cursor:pointer;
    box-shadow:0 10px 22px rgba(44,125,191,.22);
    margin-top:12px;
  }
  .primaryBtn:active{opacity:.85}
  .primaryBtn[disabled]{opacity:.55;cursor:not-allowed}

  .secondaryBtn{
    width:100%;
    padding:13px 14px;
    border-radius:14px;
    border:1px solid var(--line);
    background:#fff;
    color:#111;
    font-weight:700;
    font-size:15px;
    cursor:pointer;
    box-shadow:0 8px 18px rgba(15,45,86,.06);
    margin-top:10px;
  }
  .secondaryBtn:active{opacity:.88}

  .microHint{
    font-size:12px;
    color:#6b7280;
    text-align:center;
    margin-top:8px;
    line-height:1.35;
    font-weight:600;
  }

  /* Simple centered CTA screen */
  .centerStage{
    min-height:calc(var(--phone-h) - var(--head-h) - var(--footer-h) - 24px);
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .ctaCard{
    width:100%;
    background:#fff;
    border:1px solid var(--line);
    border-radius:22px;
    box-shadow:var(--shadow2);
    padding:18px;
  }
  .ctaTitle{font-size:16px;font-weight:700;color:#0b1b2b;line-height:1.2}
  .ctaSub{margin-top:8px;font-size:13px;font-weight:600;color:#64748b;line-height:1.35}

  /* Toast */
  .toast{
    position:absolute;
    left:12px;right:12px;bottom:calc(var(--footer-h) + 12px);
    background:#0b1b2b;
    color:#fff;
    padding:12px 12px;
    border-radius:16px;
    font-size:13px;
    font-weight:600;
    box-shadow:0 18px 40px rgba(0,0,0,.18);
    opacity:0;
    transform:translateY(12px);
    transition:opacity .22s ease, transform .22s ease;
    pointer-events:none;
    z-index:10;
  }
  .toast.show{opacity:1;transform:translateY(0)}
</style>
</head>

<body>
<div class="wrap">
  <div class="phone">
    <div class="screens">

      <!-- Screen 1: Global entry point used everywhere an upgrade is needed -->
      <div class="screen" id="screen-entry">
        <div class="topbar">
<div class="title" style="text-align:center;">
  <img src="https://d34hmiuaex7c0.cloudfront.net/2952/uploads/1749465920524.png"
       style="width:30%; height:auto; padding-top: 10px;"
       alt="Projects Icon">
</div>
        </div>

        <div class="content">
          <div class="centerStage">
            <div class="ctaCard">
              <div class="ctaTitle">Unlock feature</div>
              <div class="ctaSub">Enable the capability you tried to access.</div>
              <button class="primaryBtn" style="margin-top:14px;" onclick="openLocked(state.featureName, state.needsPlan)">
                Unlock feature
              </button>
              <div class="microHint">You can manage upgrades anytime in Settings.</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Screen 2: Feature requirement + actions (immediate) -->
      <div class="screen off-right hidden" id="screen-locked" aria-hidden="true">
        <div class="topbar">
          <div class="backBtn" onclick="navBack()">
            <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>
          </div>
          <div class="title">Upgrade</div>
        </div>

        <div class="content">
          <div class="heroCard">
            <div class="lockRow">
              <div class="lockIcon">
                <svg viewBox="0 0 24 24">
                  <path d="M7 11V8a5 5 0 0 1 10 0v3"/>
                  <path d="M6 11h12v10H6z"/>
                </svg>
              </div>
              <div class="lockMeta">
                <div class="lockKicker">This feature needs</div>
                <div class="lockNeed" id="needText">—</div>
              </div>
            </div>

            <div class="miniGrid">
              <div class="miniStat">
                <div class="k">Feature</div>
                <div class="v" id="featureName">—</div>
              </div>
              <div class="miniStat">
                <div class="k">Current subscription</div>
                <div class="v" id="currentPlan">—</div>
              </div>
            </div>
          </div>


          <div class="card" style="margin-top:6px;">
            <div style="font-weight:700;color:#0b1b2b;">Pick what to enable</div>
            <div class="mutedLine" style="margin-top:6px;">
              Choose a capability set to unlock this feature.
            </div>

            <button class="primaryBtn" onclick="navTo('screen-capabilities')">Choose capabilities</button>
            <button class="secondaryBtn" onclick="navBack()">Not now</button>
          </div>
        </div>
      </div>

      <!-- Screen 3: Capabilities selection (no pricing copy anywhere) -->
      <div class="screen off-right hidden" id="screen-capabilities" aria-hidden="true">
        <div class="topbar">
          <div class="backBtn" onclick="navBack()">
            <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>
          </div>
          <div class="title">Capabilities</div>
        </div>

        <div class="content">
          <div class="miniGrid" style="margin-top:2px;">
            <div class="miniStat">
              <div class="k">Feature</div>
              <div class="v" id="capFeature">—</div>
            </div>
            <div class="miniStat">
              <div class="k">Current subscription</div>
              <div class="v" id="capCurrentPlan">—</div>
            </div>
          </div>


          <div class="bucket" id="bucket-grow" onclick="selectBucket('grow')">
            <div class="bucketTop">
              <div style="min-width:0;">
                <div class="bucketTitle">Enable Grow capabilities</div>
                <div class="bucketSub">Unlock the core tools most teams need day to day.</div>
              </div>
              <div class="radio" aria-hidden="true"><div class="dot"></div></div>
            </div>

            <div class="featureList">
              <div class="feat"><span class="check"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Save reusable workflows and checklists</div>
              <div class="feat"><span class="check"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Assign tasks to teammates with accountability</div>
              <div class="feat"><span class="check"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Track projects with milestones and due dates</div>
              <div class="feat"><span class="check"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Simple reporting across workstreams</div>
            </div>
          </div>

          <div class="bucket pro" id="bucket-pro" onclick="togglePro()">

            <div class="bucketTop">
              <div style="min-width:0;">
                <div class="bucketTitle">Add Pro capabilities</div>
                <div class="bucketSub">Layer in advanced controls and automation.</div>
              </div>
              <div class="toggle" id="proToggle" role="switch" aria-checked="false"></div>
            </div>

            <div class="featureList" style="margin-top:12px;">
              <div class="feat"><span class="check"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Automation rules (if this → then that)</div>
              <div class="feat"><span class="check"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Advanced permissions and role controls</div>
              <div class="feat"><span class="check"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Priority routing and escalation</div>
              <div class="feat"><span class="check"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Custom fields and validation rules</div>
            </div>

            <div class="addRow">
              <div class="addMeta">
                <div class="addTitle">Enable Pro for this area</div>
                <div class="addSub">Adds advanced controls for this feature.</div>
              </div>
              <div style="font-weight:700;color:#0b1b2b;white-space:nowrap;" id="proStatus">Off</div>
            </div>
          </div>

          <button class="primaryBtn" id="capContinue" onclick="navTo('screen-onboarding')" disabled>
            Continue
          </button>
          <div class="microHint" id="capHint">Select Grow to continue.</div>
        </div>
      </div>

      <!-- Screen 4: Onboarding selection -->
      <div class="screen off-right hidden" id="screen-onboarding" aria-hidden="true">
        <div class="topbar">
          <div class="backBtn" onclick="navBack()">
            <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>
          </div>
          <div class="title">Onboarding</div>
        </div>

        <div class="content">
          <div class="heroCard" style="margin-top:2px;">
            <div style="font-size:15px;font-weight:700;color:#0b1b2b;">How do you want to get set up?</div>
            <div class="mutedLine" style="margin-top:8px;">Pick an onboarding option, or continue without one.</div>
            <div class="miniGrid" style="margin-top:12px;">
              <div class="miniStat">
                <div class="k">Selected</div>
                <div class="v" id="obPlanLabel">—</div>
              </div>
              <div class="miniStat">
                <div class="k">Pro</div>
                <div class="v" id="obProLabel">Off</div>
              </div>
            </div>
          </div>

          <div class="choiceCard" id="ob-none" onclick="selectOnboarding('none')">
            <div class="choiceTop">
              <div style="min-width:0;">
                <div class="choiceTitle">Continue without onboarding</div>
                <div class="choiceSub">You can enable features now and set up at your own pace.</div>
              </div>
              <div class="radio" aria-hidden="true"><div class="dot"></div></div>
            </div>
          </div>

          <div class="choiceCard" id="ob-launch" onclick="selectOnboarding('launch')">
            <div class="choiceTop">
              <div style="min-width:0;">
                <div class="choiceTitle">Segwik Launch Experience</div>
                <div class="choiceSub">We set up your workspace, map key workflows, and launch you with momentum.</div>
              </div>
              <div class="badge">Recommended</div>
            </div>
            <div class="featureList" style="margin-top:12px;">
              <div class="feat"><span class="check"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Workspace setup and configuration</div>
              <div class="feat"><span class="check"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Workflow mapping and checklist buildout</div>
              <div class="feat"><span class="check"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Guided launch and best-practice structure</div>
            </div>
          </div>

          <div class="choiceCard" id="ob-growth" onclick="selectOnboarding('growth')">
            <div class="choiceTop">
              <div style="min-width:0;">
                <div class="choiceTitle">Segwik Growth Accelerator</div>
                <div class="choiceSub">We optimize your workspace, clean up structure, and build what you need to scale faster.</div>
              </div>
              <div class="radio" aria-hidden="true"><div class="dot"></div></div>
            </div>
            <div class="featureList" style="margin-top:12px;">
              <div class="feat"><span class="check"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Advanced workflow structure + templates</div>
              <div class="feat"><span class="check"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Roles, permissions, and rollout planning</div>
              <div class="feat"><span class="check"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Reporting-ready setup and scale recommendations</div>
            </div>
          </div>


          <div class="choiceCard" id="ob-custom" onclick="selectOnboarding('custom')">
            <div class="choiceTop">
              <div style="min-width:0;">
                <div class="choiceTitle">Custom Setup</div>
                <div class="choiceSub">More involved buildout for teams with multiple workstreams and roles.</div>
              </div>
              <div class="radio" aria-hidden="true"><div class="dot"></div></div>
            </div>
            <div class="featureList" style="margin-top:12px;">
              <div class="feat"><span class="check"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Custom fields, roles, and templates</div>
              <div class="feat"><span class="check"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Advanced workflow design and rollout</div>
              <div class="feat"><span class="check"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Team enablement and handoff</div>
            </div>
          </div>

          <button class="primaryBtn" onclick="navTo('screen-summary')">Continue</button>
        </div>
      </div>

      <!-- Screen 5: Summary (this is the only place pricing is displayed) -->
      <div class="screen off-right hidden" id="screen-summary" aria-hidden="true">
        <div class="topbar">
          <div class="backBtn" onclick="navBack()">
            <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>
          </div>
          <div class="title">Summary</div>
        </div>

        <div class="content">
          <div class="heroCard" style="margin-top:2px;">
            <div style="font-size:15px;font-weight:700;color:#0b1b2b;">Review and confirm</div>
            <div class="mutedLine" style="margin-top:8px;">Confirm what will be enabled for this feature.</div>

            <div class="miniGrid" style="margin-top:12px;">
              <div class="miniStat">
                <div class="k">Feature</div>
                <div class="v" id="sumFeaturePill">—</div>
              </div>
              <div class="miniStat">
                <div class="k">Current subscription</div>
                <div class="v" id="sumCurrentPlan">—</div>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="sectionTitle" style="margin-top:0;"><span class="dot"></span>What you’re enabling</div>

            <div class="summaryGrid">
              <div class="k">New subscription</div>
              <div class="v" id="sumNewPlan">—</div>

              <div class="k">Pro capabilities</div>
              <div class="v" id="sumPro">Off</div>

              <div class="k">Onboarding</div>
              <div class="v" id="sumOnboarding">None</div>
            </div>

            <div class="divider"></div>

            <div class="sectionTitle" style="margin:0 0 8px;"><span class="dot"></span>Pricing</div>

            <div class="summaryGrid">
              <div class="k">Recurring (monthly)</div>
              <div class="v" id="sumRecurring">$0</div>

              <div class="k">One-time onboarding</div>
              <div class="v" id="sumOnetime">$0</div>
            </div>

            <button class="primaryBtn" id="confirmBtn" onclick="confirmUpgrade()">Confirm upgrade</button>
            <button class="secondaryBtn" onclick="navBack()">Go back</button>

            <div class="microHint" id="confirmHint">Your changes apply immediately.</div>
          </div>
        </div>
      </div>

    </div>

    <!-- bottom tabs (always visible) -->
    <div class="tabs" id="tabs">
      <div class="tab">
        <svg viewBox="0 0 24 24"><path d="M3 10.5l9-7 9 7"/><path d="M9 22V12h6v10"/></svg>
        Home
      </div>
      <div class="tab active">
        <svg viewBox="0 0 24 24"><path d="M4 4h6v6H4z"/><path d="M14 4h6v6h-6z"/><path d="M4 14h6v6H4z"/><path d="M14 14h6v6h-6z"/></svg>
        Upgrade
      </div>
      <div class="tab">
        <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 3-1.34 3-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3z"/><path d="M8 11c1.66 0 3-1.34 3-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3z"/><path d="M8 13c-2.33 0-7 1.17-7 3.5V19h14v-2.5C15 14.17 10.33 13 8 13z"/><path d="M16 13c-.29 0-.62.02-1 .05 1.16.84 2 1.94 2 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
        Contacts
      </div>
      <div class="tab">
        <svg viewBox="0 0 24 24"><path d="M4 6h16v14H4z"/><path d="M8 2v4M16 2v4"/><path d="M7 10h10M7 14h10"/></svg>
        Calendar
      </div>
      <div class="tab">
        <svg viewBox="0 0 24 24"><circle cx="5" cy="12" r="1.8"/><circle cx="12" cy="12" r="1.8"/><circle cx="19" cy="12" r="1.8"/></svg>
        More
      </div>
    </div>

    <div class="toast" id="toast"></div>
  </div>
</div>

<script>
  /* -----------------------
     STATE (set these from the place that triggered the upgrade)
     - featureName: what they tried to access
     - needsPlan: what tier is required (e.g., "Grow")
     - currentPlan: their current tier
  ------------------------ */
  const state = {
    featureName: "Advanced Automations",
    needsPlan: "Grow",
    currentPlan: "Segwik Start",

    selectedPlan: null,    // "Grow"
    proEnabled: false,     // boolean
    onboarding: "none",    // "none" | "launch" | "growth" | "custom"


    prices: {
      growMonthly: 39,
      proAddMonthly: 60,
      onboarding: { none: 0, launch: 500, growth: 999, custom: 999 }
    }

  };


  /* ---------- Navigation ---------- */
  const stack = ["screen-entry"];

  function byId(id){ return document.getElementById(id); }

  function navTo(id){
    const fromId = stack[stack.length - 1];
    if(fromId === id) return;

    const from = byId(fromId);
    const to = byId(id);

    const toContent = to.querySelector(".content");
    if(toContent) toContent.scrollTop = 0;

    to.classList.remove("hidden");
    to.classList.add("off-right");

    requestAnimationFrame(()=>requestAnimationFrame(()=>{
      from.classList.add("off-left");
      to.classList.remove("off-right");
    }));

    setTimeout(()=>{
      from.classList.add("hidden");
      from.classList.remove("off-left");
    }, 360);

    stack.push(id);
  }

  function navBack(){
    if(stack.length <= 1) return;

    const fromId = stack.pop();
    const toId = stack[stack.length - 1];

    const from = byId(fromId);
    const to = byId(toId);

    to.classList.remove("hidden");
    to.classList.remove("off-left","off-right");

    requestAnimationFrame(()=>requestAnimationFrame(()=>{
      from.classList.add("off-right");
    }));

    setTimeout(()=>{
      from.classList.add("hidden");
      from.classList.remove("off-right");
    }, 360);
  }

  /* ---------- Toast ---------- */
  let toastTimer = null;
  function toast(msg){
    const el = document.getElementById("toast");
    el.textContent = msg;
    el.classList.add("show");
    clearTimeout(toastTimer);
    toastTimer = setTimeout(()=> el.classList.remove("show"), 1600);
  }

  /* ---------- Entry / Locked screen ---------- */
  function openLocked(featureName, needsPlan){
    state.featureName = featureName || state.featureName;
    state.needsPlan = needsPlan || state.needsPlan;

    // clean slate per attempt
    state.selectedPlan = null;
    state.proEnabled = false;
    state.onboarding = "none";

    // locked screen copy
    document.getElementById("featureName").textContent = state.featureName;
    document.getElementById("needText").textContent = state.needsPlan;
    document.getElementById("currentPlan").textContent = state.currentPlan;

    // capabilities hero stats
    document.getElementById("capFeature").textContent = state.featureName;
    document.getElementById("capCurrentPlan").textContent = state.currentPlan;

    // reset UI
    setBucketUI(null);
    setProUI(false);
    setCapContinueState();

    // reset onboarding UI
    setOnboardingUI("none");

    // go
    navTo("screen-locked");
  }

  /* ---------- Capabilities selection ---------- */
  function setBucketUI(which){
    const grow = document.getElementById("bucket-grow");
    if(which === "grow") grow.classList.add("active");
    else grow.classList.remove("active");
  }

  function setProUI(on){
    const t = document.getElementById("proToggle");
    const status = document.getElementById("proStatus");
    const bucket = document.getElementById("bucket-pro");
    state.proEnabled = !!on;

    if(state.proEnabled){
      t.classList.add("on");
      t.setAttribute("aria-checked","true");
      status.textContent = "On";
      bucket.classList.add("active");
    } else {
      t.classList.remove("on");
      t.setAttribute("aria-checked","false");
      status.textContent = "Off";
      bucket.classList.remove("active");
    }
  }


  function setCapContinueState(){
    const btn = document.getElementById("capContinue");
    const hint = document.getElementById("capHint");
    const ok = (state.selectedPlan === "Grow");
    btn.disabled = !ok;
    hint.textContent = ok ? "" : "Select Grow to continue.";
  }

  function selectBucket(which){
    if(which === "grow"){
      state.selectedPlan = "Grow";
      setBucketUI("grow");
      setCapContinueState();
      toast("Grow selected");
    }
  }

  function togglePro(){
    if(state.selectedPlan !== "Grow"){
      toast("Select Grow first");
      return;
    }
    setProUI(!state.proEnabled);
  }

  /* ---------- Onboarding selection ---------- */
  function setOnboardingUI(which){
    state.onboarding = which;

    const ids = ["none","launch","growth","custom"];

    ids.forEach(x=>{
      const el = document.getElementById("ob-"+x);
      if(!el) return;
      el.classList.remove("active");
      const radio = el.querySelector(".radio");
      if(radio){
        radio.style.borderColor = "#cbd5e1";
        radio.querySelector(".dot").style.background = "transparent";
      }
    });


    const chosen = document.getElementById("ob-"+which);
    chosen.classList.add("active");

    const radio = chosen.querySelector(".radio");
    if(radio){
      radio.style.borderColor = "rgba(44,125,191,.65)";
      radio.querySelector(".dot").style.background = "var(--accent)";
    }

    document.getElementById("obPlanLabel").textContent = (state.selectedPlan || "—");
    document.getElementById("obProLabel").textContent = state.proEnabled ? "On" : "Off";
  }

  function selectOnboarding(which){
    setOnboardingUI(which);
    const label =
      (which === "none") ? "No onboarding" :
      (which === "launch") ? "Launch Experience" :
      (which === "growth") ? "Growth Accelerator" :
      "Custom Setup";

    toast(label);
  }

  /* ---------- Summary + pricing ---------- */
  function money(n){
    const x = Number(n || 0);
    return "$" + x.toFixed(0);
  }

  function computeRecurring(){
    let total = 0;
    if(state.selectedPlan === "Grow") total += state.prices.growMonthly;
    if(state.proEnabled) total += state.prices.proAddMonthly;
    return total;
  }

  function renderSummary(){
    document.getElementById("sumFeaturePill").textContent = state.featureName;
    document.getElementById("sumCurrentPlan").textContent = state.currentPlan;

    document.getElementById("sumNewPlan").textContent = state.selectedPlan || "—";
    document.getElementById("sumPro").textContent = state.proEnabled ? "On" : "Off";

    const obLabel =
      (state.onboarding === "none") ? "None" :
      (state.onboarding === "launch") ? "Segwik Launch Experience" :
      (state.onboarding === "growth") ? "Segwik Growth Accelerator" :
      "Custom Setup";

    document.getElementById("sumOnboarding").textContent = obLabel;

    const recurring = computeRecurring();
    const onetime = state.prices.onboarding[state.onboarding] || 0;

    document.getElementById("sumRecurring").textContent = money(recurring);
    document.getElementById("sumOnetime").textContent = money(onetime);
  }

  // hook render on summary nav
  const _navTo = navTo;
  navTo = function(id){
    if(id === "screen-onboarding"){
      document.getElementById("obPlanLabel").textContent = (state.selectedPlan || "—");
      document.getElementById("obProLabel").textContent = state.proEnabled ? "On" : "Off";
    }
    if(id === "screen-summary"){
      renderSummary();
    }
    _navTo(id);
  };

  /* ---------- Confirm ---------- */
  function confirmUpgrade(){
    const btn = document.getElementById("confirmBtn");
    const hint = document.getElementById("confirmHint");

    if(state.selectedPlan !== "Grow"){
      toast("Select a plan first");
      return;
    }

    btn.disabled = true;
    hint.textContent = "Applying your changes…";

    setTimeout(()=>{
      // apply
      state.currentPlan = state.selectedPlan;

      btn.disabled = false;
      hint.textContent = "Your changes apply immediately.";
      toast("Upgrade applied");

      // reset to entry for next use
      hardResetToEntry();
    }, 900);
  }

  function hardResetToEntry(){
    // show entry, hide others
    const ids = ["screen-entry","screen-locked","screen-capabilities","screen-onboarding","screen-summary"];
    ids.forEach(id=>{
      const el = document.getElementById(id);
      el.classList.add("hidden","off-right");
      el.classList.remove("off-left");
    });
    const entry = document.getElementById("screen-entry");
    entry.classList.remove("hidden","off-right","off-left");

    // reset stack
    stack.length = 0;
    stack.push("screen-entry");

    // clean slate (keep currentPlan updated)
    state.selectedPlan = null;
    state.proEnabled = false;
    state.onboarding = "none";
    setBucketUI(null);
    setProUI(false);
    setCapContinueState();
    setOnboardingUI("none");
  }

  /* ---------- Init ---------- */
  (function init(){
    hardResetToEntry();
  })();
</script>
</body>
</html>
